$ sudo apt update
$ sudo apt install ansible
$ sudo apt install virtualbox
$ sudo atp update
$ curl -O https://releases.hashicorp.com/vagrant/2.2.14/vagrant_2.2.14_x86_64.deb
$ sudo apt install ./vagrant_2.2.14_x86_64.deb
$ vagrant --version

$ mkdir ansible-book && cd ansible-book
$ vagrant init ubuntu/trusty64
#  Open the Vagrantfile in your editor and add the following to the end of the file, just
before the word end.  
$ vi Vagrantfile
 config.vm.box = "ubuntu/trusty64"
 config.vm.network "private_network", type:"dhcp"

# This tells Vagrant that it needs to create a virtual machine with 1024mb of memory.
# We also need to tell Vagrant that we want to run Ansible on this virtual machine by
adding some instructions to the Vagrantfile, just after the configuration you just added.
Right at the bottom and before the word end, add the following contents to the file:
config.vm.provider "virtualbox" do |vb|
 vb.memory = "1024"
 vb.gui = true
end

# This tells Vagrant to use Ansible to run the playbook named playbook.yml inside a
folder named provisioning in the current directory. 
config.vm.provision "ansible" do |ansible|
 ansible.playbook = "provisioning/playbook.yml"
end 

$ vagrant up
$ vagrant status
$ vagrant destroy
#Enable nested VM
$VBoxManage modifyvm ansible-book_default_1607797511858_37122 --nested-hw-virt on

#Playbook.yml
$ vi ./provisioning/playbook.yml

---
- hosts: all
  become: true
  tasks:
    - name: Make sure that we can connect to the machine
      ping:
    - name: Install PHP
      apt: name=php5-cli state=present update_cache=yes
    - name: Install nginx
      apt: name=nginx state=present
    - name: Install mySQL
      apt: name=mysql-server-5.6 state=present

# consolidated playbook.yml
---
- hosts: all
  become: true
  tasks:
    - name: Install required packages
      apt: name={{item}} state=present update_cache=yes
      with_items:
        - php5-cli
        - nginx
        - mysql-server-5.6

$ vagrant provision

$ vagrant ssh
$ which php
$ which nginx
$ which mysqld

# using ansible-playbook command
vi inventory_file
172.28.128.5 ansible_user=vagrant ansible_ssh_private_key_file=.vagrant/machines/default/virtualbox/private_key


$ ansible-book$ ansible-playbook -i inventory_file provisioning/playbook.yml
